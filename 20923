import tkinter as tk
from tkinter import messagebox

def orienter_patient():
    genre = genre_var.get()
    try:
        age = int(age_var.get())
    except ValueError:
        messagebox.showerror("Erreur", "Veuillez entrer un âge valide.")
        return
    symptomes = symptomes_var.get().split(',')

    departements = {
        'cardiologie': ['douleur thoracique', 'essoufflement'],
        'gynécologie': ['douleur pelvienne', 'saignement'],
        'pédiatrie': ['fièvre', 'toux'],
        'gériatrie': ['perte de mémoire', 'chutes']
    }

    genres_valides = ['homme', 'femme', 'non-binaire']
    if genre not in genres_valides:
        messagebox.showerror("Erreur", "Genre invalide. Veuillez entrer 'homme', 'femme' ou 'non-binaire'.")
        return

    if age < 0 or age > 120:
        messagebox.showerror("Erreur", "Âge invalide. Veuillez entrer un âge entre 0 et 120 ans.")
        return

    for departement, symptomes_dept in departements.items():
        if any(symptome.strip() in symptomes for symptome in symptomes_dept):
            if departement == 'gynécologie' and (genre != 'femme' or age > 50):
                messagebox.showerror("Erreur", "La gynécologie est réservée aux femmes de moins de 50 ans.")
                return
            messagebox.showinfo("Orientation", f"Le patient doit être orienté vers le département de {departement}.")
            return

    messagebox.showerror("Erreur", "Aucun département approprié trouvé pour les symptômes donnés.")

# Création de la fenêtre principale
root = tk.Tk()
root.title("Orientation des Patients")

# Variables
genre_var = tk.StringVar()
age_var = tk.StringVar()
symptomes_var = tk.StringVar()

# Widgets
tk.Label(root, text="Genre (homme, femme, non-binaire):").grid(row=0, column=0)
genre_entry = tk.Entry(root, textvariable=genre_var)
genre_entry.grid(row=0, column=1)

tk.Label(root, text="Âge:").grid(row=1, column=0)
age_entry = tk.Entry(root, textvariable=age_var)
age_entry.grid(row=1, column=1)

tk.Label(root, text="Symptômes (séparés par des virgules):").grid(row=2, column=0)
symptomes_entry = tk.Entry(root, textvariable=symptomes_var)
symptomes_entry.grid(row=2, column=1)

tk.Button(root, text="Orienter", command=orienter_patient).grid(row=3, columnspan=2)

# Boucle principale
root.mainloop()
